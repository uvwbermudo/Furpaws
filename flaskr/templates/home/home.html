

{% extends 'base.html' %}
{% block title %} FurPaws - Home {% endblock %}
<a href="/logout">PRESS TO LOGOUT</a>

  

{% block body_content %}
<div class="main-feed" id="main-feed">
  <div class="rectangle-3"></div>
  <div class="rectangle-4">
    <div class="rect-4-top">
      <img class="top-ss-profpic" img src="../../static/img/postprofile.jpg"/>
      <button class="share-something" data-bs-toggle="modal" data-bs-target="#addPostModal" data-bs-whatever="@getbootstrap" type="button">
        Share something...
      </button>
    </div>

    <div class="rect-4-bot">
      <label data-bs-toggle="modal" data-bs-target="#addPostModal"class="ss-add-post-photo-btns" name="add_photos"><img src="../../static/img/image-line.png"/>
        Add Photos
      </label>
      <label data-bs-toggle="modal" data-bs-target="#addPostModal" name="add_videos" class="ss-add-post-video-btns">
        <img src="../../static/img/movie-line.png">
        Add Videos
      </label>
    </div>
  </div>
      
    


  <div class="modal fade" id="addPostModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cpost-modal-title">Create Post</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group"> <form method='post' action='' enctype="multipart/form-data">
            <label for="message-text" class="col-form-label float-start">
              <div class="cpost-upper">
                <img class="cpost-profile-pic" img src="../../static/img/postprofile.jpg"/>
                <h5 class="post-username">{{current_user.tag}}</h5>
              </div>
            </label>

            {{form.post_description(class="form-control")}}
          </div>
        </div>

        <div class="modal-footer" style="justify-content: flex-start;"> 
          <label for="add_photos" class="add-post-btns" name="add_photos"><img src="../../static/img/image-line.png"/>
            Add Photos
          </label>
          <label for="add_videos" name="add_videos" class="add-post-btns">
          <img src="../../static/img/movie-line.png">
            Add Videos
          </label>

          
          <input type="file" name="files[]" multiple="true" id="add_photos" accept="image/png, image/jpg, image/jpeg" onclick="imageTooLargeAlert();" hidden>
          <input type="file" name="add_videos" multiple="true" id="add_videos" accept="video/mp4" onclick="videoTooLargeAlert();" hidden>
          <div class="add-post-preview-container" id="add-post-preview-container">
          </div>
          <div class="add-post-preview-container2" id="add-post-preview-container2">
          </div>

          {{form.csrf_token}}{{form.add_post_button(class="submit-post")}}
          </form>
          <div id="videoAlertBox">
            <div class="videoAlertMessage">
              <br>
              File is too large!
              <br>
              Video files cannot exceed 100 MB!
            </div>
            <br>
            <button class="videoAlertButton" onclick="hide">
              OK
            </button>
          </div>

          <div name="imageAlertBox" id="imageAlertBox">
            <div class="imageAlertMessage">
              <br>
              File is too large!
              <br>
              Image files cannot exceed 10 MB!
            </div>
            <br>
            <button class="imageAlertButton">
              OK
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="main-feed-posts">
    {% for post in main_feed %}

      <!-- Delete Post Modal -->
      <div class="modal fade" id="deletePostModal{{post.post_id}}" tabindex="-1" aria-labelledby="deletePostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="deleteModalLabel">
                Delete Post
              </h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to delete this post?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                Close
              </button>
              <form action="{{url_for('home.delete_post', post_id=post.post_id)}}" method="POST">
                {{form.csrf_token}}
                <input type="submit" class="btn btn-danger" value="Delete">
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit Post Modal -->
      <div class="modal fade" id="editPostModal{{post.post_id}}" tabindex="-1" 
        aria-labelledby="editPostModalLabel" aria-hidden="true" width="800px" height="500px">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="editPostModalLabel">
                Edit Post
              </h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              </button>
            </div>
            <div class="modal-body">
              <form action="/home/update/{{post.post_id}}" method="POST">
              <textarea class="form-control" name="post_description" id="post_description">{{post.post_content}}</textarea>
              {% if post.photos %}
                <div class="edit-post-media-cont">
                  {% for photo in post.photos %}
                    <div class="media-wrapper-img" id="media-wrapper-img{{photo.photo_id}}">
                      <img class="modal-clicked-photo" src="{{photo.photo_url}}">
                      <button id="deletepic{{photo.photo_id}}" type="button" class="btn text-white" hx-post="/photos/delete/confirm/{{photo.photo_id}}" hx-trigger="click" hx-target="#deletepic{{photo.photo_id}}" hx-swap="outerHTML"><i class="bi-trash-fill text-white"></i><span class="ps-1">Remove</span></button>
                    </div>
                  {% endfor %}
                </div>
              {% endif %}
            
              {% if post.videos %}
                <div class="edit-post-media-cont">
                  {% for video in post.videos %}
                    <div class="media-wrapper-vid" id="media-wrapper-vid{{video.video_id}}">
                      <video src="{{video.video_url}}"></video>
                      <button id="deletevid{{video.video_id}}" type="button" class="btn text-white" hx-post="/videos/delete/confirm/{{video.video_id}}" hx-trigger="click" hx-target="#deletevid{{video.video_id}}" hx-swap="outerHTML"><i class="bi-trash-fill text-white"></i><span class="ps-1">Remove</span></button>
                    </div>  
                  {% endfor %}
                </div>
              {% endif %}
              <div class="modal-footer">    
                {{edit_form.csrf_token}}
                {{edit_form.edit_post_button(class="submit-post")}}
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!-- SHARE POST MODAL -->
      <div class="modal fade" id="sharePostModal{{post.post_id}}" tabindex="-1" aria-labelledby="sharePostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="shareModalLabel">
                Share Post
              </h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to share this post?
            </div>
            <div class="modal-footer">
              <form action="{{url_for('home.share_post', post_id=post.post_id)}}" method="POST">
                {{form.csrf_token}}
                <input type="submit" class="submit-post" value="Share Post">
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- COMMENT MODALS  -->
      <div class="modal fade" id="viewCommentsModal{{post.post_id}}" tabindex="-1" role="dialog" aria-labelledby="viewCommentsModalLabel{{post.post_id}}" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title fs-5" id="viewCommentsModalLabel{{post.post_id}}">
                @{{post.author_tag}}'s post
              </p>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              </button>
            </div>
            <div class="modal-body bg-info bg-opacity-10" >
              <div class="container-fluid">
                <div class="comments" id="main-feed-comments-{{post.post_id}}">
                  Comments:
                  {% if post.author_tag == current_user.tag %}
                    {% for comments in post.comments %}
                      {% if comments.author_tag == current_user.tag %}
                        <div class="row p-3 bg-white border-bottom" id="main-feed-comment-{{comments.comment_id}}">
                          <div class="col-1 p-1 text-end">
                            profile picture
                          </div>
                          <div class="col-1 p-1 text-center">
                            <a href="#">{{comments.author_tag}}</a> :
                          </div>
                          <div class="col p-1 text-start" id="comment-content-{{comments.comment_id}}">
                            {{comments.comment_content}}
                          </div>
                          <div class="col-2 p-1 text-end">
                            {{comments.date_commented.strftime("%d, %b %Y").lower()}}
                            <div class="btn-group">
                              <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                  </svg>
                              </button>
                              <ul class="dropdown-menu">
                                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editCommentModal{{comments.comment_id}}">Edit</a></li>
                                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deleteCommentsModal{{comments.comment_id}}">Delete</a></li>
                                <li><a class="dropdown-item">Report</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      {% else %}
                        <div class="row p-3 bg-white border-bottom" id="main-feed-comment-{{comments.comment_id}}">
                          <div class="col-1 p-1 text-end">
                            profile picture
                          </div>
                          <div class="col-1 p-1 text-center">
                            <a href="#">{{comments.author_tag}}</a> :
                          </div>
                          <div class="col p-1 text-start" id="comment-content-{{comments.comment_id}}">
                            {{comments.comment_content}}
                          </div>
                          <div class="col-2 p-1 text-end">
                            {{comments.date_commented.strftime("%d, %b %Y").lower()}}
                            <div class="btn-group">
                              <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                  </svg>
                              </button>
                              <ul class="dropdown-menu">
                                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deleteCommentsModal{{comments.comment_id}}">Delete</a></li>
                                <li><a class="dropdown-item">Report</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    {% for comments in post.comments %}
                        {% if comments.author_tag == current_user.tag %}
                          <div class="row p-3 bg-white border-bottom" id="main-feed-comment-{{comments.comment_id}}">
                            <div class="col-1 p-1 text-end">
                              profile picture
                            </div>
                            <div class="col-1 p-1 text-center">
                              <a href="#">{{comments.author_tag}}</a> :
                            </div>
                            <div class="col p-1 text-start" id="comment-content-{{comments.comment_id}}">
                              {{comments.comment_content}}
                            </div>
                            <div class="col-2 p-1 text-end">
                              {{comments.date_commented.strftime("%d, %b %Y").lower()}}
                              <div class="btn-group">
                                <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                    <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                    </svg>
                                </button>
                                <ul class="dropdown-menu">
                                  <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editCommentModal{{comments.comment_id}}">Edit</a></li>
                                  <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deleteCommentsModal{{comments.comment_id}}">Delete</a></li>
                                  <li><a class="dropdown-item">Report</a></li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        {% else %}
                        <div class="row p-3 bg-white border-bottom" id="main-feed-comment-{{comments.comment_id}}">
                          <div class="col-1 p-1 text-end">
                            profile picture
                          </div>
                          <div class="col-1 p-1 text-center">
                            <a href="#">{{comments.author_tag}}</a> :
                          </div>
                          <div class="col p-1 text-start" id="comment-content-{{comments.comment_id}}">
                            {{comments.comment_content}}
                          </div>
                          <div class="col-2 p-1 text-end">
                            {{comments.date_commented.strftime("%d, %b %Y").lower()}}
                            <div class="btn-group">
                              <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                  <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                  </svg>
                              </button>
                              <ul class="dropdown-menu">
                                <li><a class="dropdown-item">Report</a></li>
                              </ul>
                            </div>
                          </div>
                        </div>
                        {% endif%}
                    {% endfor %}
                  {% endif %}
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <form class="input-group mb-3" id="create-main-feed-comment-{{post.post_id}}" method="POST" action="/home/create-comment/{{post.post_id}}">
              <textarea class="form-control" style="width: 115px;" id="comment_textbox{{post.post_id}}" name="comment_textbox" placeholder="Say something about this post..." required></textarea>
              {{form.csrf_token}}
              <br><pre> </pre>
              <button onclick="commentMainFeedPost({{post.post_id}});" type="submit" 
              style=
              "border-radius: 10px;
              width:170px;
              padding: 3px;
              border:none;
              outline:none;
              background-color: rgb(109, 216, 235);
              color: white;">
                Comment
              </button>
              </form>
            </div>
            <br>

          </div>
        </div>
      </div>
      
      {% for comments in post.comments %}
        <div class="modal fade" id="editCommentModal{{comments.comment_id}}" tabindex="-1" role="dialog" aria-labelledby="editCommentModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="editCommentModalLabel">
                  Edit Comment
                </h1>
                <button type="button" class="btn-close" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}"></button>
              </div>
              <div class="modal-body">
                <form id="edit-comments-{{comments.comment_id}}" action="/home/update-comment/{{comments.comment_id}}/{{post.post_id}}" method="PUT">
                  <textarea class="form-control" name="edit_comment_textbox" id="editCommentTextbox-{{comments.comment_id}}" placeholder="{{comments.comment_content}}" required>{{comments.comment_content}}</textarea>
              </div>
              <div class="modal-footer">
                {{edit_comment_form.csrf_token}}
                <button class="submit-post" type="submit" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="edit_comment_button{{comments.comment_id}}" name="edit_comment_button" onclick="editCommentMainFeedPost({{post.post_id}}, {{comments.comment_id}});">Save changes</button></form>
                <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="width:100%">
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="deleteCommentsModal{{comments.comment_id}}" tabindex="-1" role="dialog" aria-labelledby="deleteCommentsModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="deleteCommentsModalLabel">
                  Delete Comment
                </h1>
                <button type="button" class="btn-close" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}"></button>
              </div>
              <div class="modal-body">
                Are you sure you want to delete this comment?
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}">
                  Cancel
                </button>
                <form id="delete-comments-{{comments.comment_id}}" action="/home/delete-comment/{{comments.comment_id}}/{{post.post_id}}" method="DELETE">
                  {{form.csrf_token}}
                  <input type="submit" onclick="deleteCommentMainFeedPost({{post.post_id}}, {{comments.comment_id}})" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" class="btn btn-danger" value="Delete">
                </form>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}


      <div class="modal fade" id="uploaded-content-modal{{post.post_id}}" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog carouse-dialog" id="carousel-dialog" role="document">
          <div class="modal-content" id="carousel-content-upper">
            <div class="modal-header" id="carousel-header">
            </div>
            <div class="modal-body" id="carousel-body">
              <div id="carousel{{post.post_id}}" class="carousel slide" data-ride="carousel" data-bs-touch="true">
                <div class="carousel-indicators">
                  {% if post.photos or post.videos %}
                    {% if post.photos %}
                      {% for photo in post.photos %}
                        {% if loop.first %}
                          <li type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide-to="{{ loop.index0 }}" class="active" aria-current="true" aria-label="Slide 1"></li>
                        {% else %}
                          <li type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide-to="{{ loop.index0 }}" aria-label="Slide 2"></li>
                        {% endif %}
                      {% endfor %}
                    {% endif %}
              
                    {% if post.videos %}
                      {% for video in post.videos %}
                      {% set loop_index = post.photos|length + loop.index0 %}
                        {% if loop.first %}
                          {% if not post.photos %}
                            <li type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide-to="{{loop_index}}" class="active" aria-current="true" aria-label="Slide 1"></li>
                          {% else %}
                              <li type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide-to="{{loop_index}}" aria-label="Slide 2"></li>
                          {% endif %}
                        {% else %}
                          <li type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide-to="{{loop_index}}" aria-label="Slide 2"></li>
                        {% endif %}
                      {% endfor %}
                    {% endif %} 
                  {% endif %}
                </div>

                <div class="carousel-inner">
                  {% if post.photos %}            
                    {% for photo in post.photos %}
                      {% if loop.first %}
                        <div class="carousel-item active ">
                          <img class="d-block w-100 carousel-constraint" src="{{photo.photo_url}}"/>
                        </div>
                      {% else %}
                        <div class="carousel-item">
                          <img class="d-block w-100 carousel-constraint" src="{{photo.photo_url}}"/>
                        </div>
                      {% endif %}
                    {% endfor %}
                  {% endif %}

                  {% if post.videos %}
                    {% for video in post.videos %}
                    {% set loop_index = post.photos|length + loop.index0 %}
                      {% if loop.first %}
                        {% if not post.photos %}
                          <div class="carousel-item active">
                            <video class="d-block w-100 carousel-constraint" src="{{video.video_url}}" controls></video> 
                          </div>
                        {% else %}
                          <div class="carousel-item">
                            <video class="d-block w-100  carousel-constraint" src="{{video.video_url}}" controls></video> 
                          </div>
                        {% endif %}
                      {% else %}
                        <div class="carousel-item ">
                          <video class="d-block w-100 carousel-constraint " src="{{video.video_url}}" controls></video> 
                        </div>
                      {% endif %}
                    {% endfor %}
                  {% endif %}
                </div>
              
                <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carousel{{post.post_id}}" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
            </div>
            <div class="modal-footer" id="carousel-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>


      {% if share_posts %}
        {% if post.post_id in share_posts|map(attribute="reference_id")|list %}
          <!-- shared post containers -->
          {% if ((post.videos or post.photos) and not ((post.videos and post.photos) or post.videos|length >1 or post.photos|length>1)) and post.post_content %}
            <div class="post-container">
              {% for shared in share_posts %}
                  {% if post.post_id == shared.reference_id %}
                  <div class="card p-3 mt-5" style="border:none;">
                    <!-- <p align="left"><br><strong>@{{shared.sharer_tag}}</strong> shared this <u><strong>post</strong></u></p> -->
                    <div class="col-3 text-center">
                      <b>@{{shared.sharer_tag}}</b> shared this <u><b>post</b></u>
                    </div>
                  </div>
                  {% endif %}
                {% endfor %}
              <div class="post-rectangle-3">
                <div class="post-rectangle-4">
                  <div class="post-upper-left">
                    <img class="post-profile-pic" img src="../../static/img/postprofile.jpg"/></img>
                    <h5 class="post-usertag" style="font-weight: bold;">{{post.author_tag}} </h5>
                  </div>
              
                  <div class="post-middle-part">
                    <div class="post-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}">
                      {% if post.photos %}
                        <img class="post-photo" source src="{{post.photos[0].photo_url}}" >
                      {% else %}
                        <video class="post-video" source src="{{post.videos[0].video_url}}" controls></video>
                      {% endif %}
                    </div>
                    <h4 class="post-description">{{post.post_content}}</h4>
                  </div>
                
                  <div class="post-upper-right">
                    <div class="dropdown">
                      <button class="post-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                        <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                        </svg>
                      </button>
                      <div class="dropdown-content">
                        {% for shared in share_posts %}
                          {% if current_user.tag == shared.sharer_tag and post.post_id == shared.reference_id %} 
                            <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                          {% endif %}
                        {% endfor %}
                        <a>Report</a>
                      </div>
                    </div>
                    <div class="post-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</div>
                  </div>
              
                  <div class="post-bottom-part">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                          <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-hearts-filled" onclick='likeMainFeedPostNorm({{post.post_id}})' viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                          </svg>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-hearts" onclick='likeMainFeedPostNorm({{post.post_id}})' viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                      </svg>
                    {% endif %}
                    <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-comments-filled" id="mainfeed-comment-button-{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"  class="post-comments" id="mainfeed-comment-button-{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% endif %}
                      <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                    {% for shared in share_posts %}
                      {% if shared.shared_post_id in share_posts|map(attribute="shared_post_id")|list and post.post_id == shared.reference_id %}
                        <a href="posts/{{shared.shared_post_id}}"> Visit Post </a>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            
            <!-- Shared Post with text only container  -->
          {% elif not post.photos and post.post_content %}
            <div class="post-wto-container">
              {% for shared in share_posts %}
                {% if post.post_id == shared.reference_id %}
                <div class="card p-3 mt-5" style="border:none;">
                  <!-- <p align="left"><br><strong>@{{shared.sharer_tag}}</strong> shared this <u><strong>post</strong></u></p> -->
                  <div class="col-3 text-center">
                    <b>@{{shared.sharer_tag}}</b> shared this <u><b>post</b></u>
                  </div>
                </div>
                {% endif %}
              {% endfor %}
              <img class="post-wto-profile-pic "img src="../../static/img/postprofile.jpg"/>

              <div class="post-wto-right-side">
                <div class="post-wto-rectangle-3">
                  <div class="post-wto-rectangle-4">
            
                    <div class="post-wto-upper">
                      <div class="post-wto-upper-left">
                        <img class="post-wto-prof-pic "img src="../../static/img/postprofile.jpg"/>
                        <h5 class="post-wto-usertag" style="font-weight: bold">{{post.author_tag}} </h5>
                      </div>
                
                      <div class="post-wto-upper-right">
                        <div class="dropdown">
                          <button class="post-wto-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                            <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                            </svg>
                          </button>
                          <div class="dropdown-content">
                            {% for shared in share_posts %}
                              {% if current_user.tag == shared.sharer_tag and post.post_id == shared.reference_id %} 
                                <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                              {% endif %}
                            {% endfor %}
                            <a>Report</a>
                          </div>
                        </div>
                        <h6 class="post-wto-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</h6>
                      </div>
                    </div>

                    <div class="post-wto-middle-part">
                      <h5 class="post-wto-description">{{ post.post_content}}</h5>
                    </div>
        
            
          
                    <div class="post-wto-bottom-part">
                      {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                        {% for like in post.likes %}
                          {% if current_user.tag == like.author_tag %}
                          <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts-filled" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                          </svg>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                      </svg>
                    {% endif %}
                    <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                      {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"  class="post-wto-comments-filled" id="mainfeed-comment-button-{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments" id="mainfeed-comment-button-{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      {% endif %}
                        <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                      {% for shared in share_posts %}
                        {% if shared.shared_post_id in share_posts|map(attribute="shared_post_id")|list and post.post_id == shared.reference_id %}
                          <a href="posts/{{shared.shared_post_id}}"> Visit Post </a>
                        {% endif %}
                      {% endfor %}
                    </div>
                  </div>
                </div>
              </div>
          
          <!-- END of Shared Post with text only container -->

          <!-- START of Shared Post with mutiple photos -->
          {% elif post.videos or post.photos %}
            <div class="post-wmp-container">
              {% for shared in share_posts %}
                {% if post.post_id == shared.reference_id %}
                <div class="card p-3 mt-5" style="border:none;">
                  <!-- <p align="left"><br><strong>@{{shared.sharer_tag}}</strong> shared this <u><strong>post</strong></u></p> -->
                  <div class="col-3 text-center">
                    <b>@{{shared.sharer_tag}}</b> shared this <u><b>post</b></u>
                  </div>
                </div>
                {% endif %}
              {% endfor %}
              <div class="post-wmp-rectangle-3" id="post-rect-3{{post.post_id}}">
                <div class="post-wmp-rectangle-4" id="post-rect-4{{post.post_id}}">
          
                  <div class="post-upper-left">
                    <img class="post-profile-pic" img src="../../static/img/postprofile.jpg"/></img>
                    <h5 class="post-usertag" style="font-weight: bold;">{{post.author_tag}} </h5>
                  </div>       
        
                  <div class="post-wmp-middle-part" onload="updateButton({{post.post_id}});">   
                    {% if post.post_content %}
                      <div class="post-wmp-desc d-block" id="post-wmp-desc"><span>{{post.post_content}}</span></div>
                      <style>
                        #slider-button{{post.post_id}} {
                          margin-top: 176px;
                        }
        
                        #post-rect-4{{post.post_id}} {
                          height: 490px;
                        }

                        #post-rect-3{{post.post_id}}{
                          height: 405px;
                        }

                        #post-bottom{{post.post_id}}{
                          top: 15px;
                        }

                        #gallery{{post.post_id}}{
                          top: -15px;
                        }

                        #post-wmp-upper-right{{post.post_id}}{
                          top: -380px;
                        }
                        
                      </style>
                    {% endif %} 
        
                    {% if post.photos or post.videos %}
                      <div class="post-wmp-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"> 
                        {% if post.photos %}
                          {% for photo in post.photos %}
                            <img class="wmp-photo" src="{{photo.photo_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></img> 
                          {% endfor %}
                        {% endif %}
              
                        {% if post.videos %}
                          {% for video in post.videos %}
                            <video src="{{video.video_url}}" class="wmp-video" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}" controls></video> 
                          {% endfor %}
                        {% endif %}
                      </div>
                      <button id="slider-button{{post.post_id}}" class="slider-button" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></button> 
                    {% endif %}
                
                    <script src="https://code.jquery.com/jquery-3.6.1.js"
                    integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
                    crossorigin="anonymous"></script>
                    <script type="text/javascript">   
                      $("#gallery{{post.post_id}}").ready(
                        function(){
                        updateButton({{post.post_id}})
                      });  
                    </script> 
                  </div>
                  
                  <div class="post-wmp-upper-right" id="post-wmp-upper-right{{post.post_id}}">
                    <div class="dropdown">
                      <button class="post-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                        <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                        </svg>
                      </button>
                      <div class="dropdown-content">
                        {% for shared in share_posts %}
                          {% if current_user.tag == shared.sharer_tag and post.post_id == shared.reference_id %} 
                            <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                          {% endif %}
                        {% endfor %}
                        <a>Report</a>
                      </div>
                    </div>
                    <div class="post-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</div>
                  </div>
              
                  <div class="post-wmp-bottom-part" id="post-bottom{{post.post_id}}">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                        <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts-filled" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                  {% endif %}
                  <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30"  height="30" fill="currentColor" class="post-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16" >      
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% endif %}
                    <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                    {% for shared in share_posts %}
                      {% if shared.shared_post_id in share_posts|map(attribute="shared_post_id")|list and post.post_id == shared.reference_id %}
                        <a href="posts/{{shared.shared_post_id}}"> Visit Post </a>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </div>

            <!-- END of Shared Post with multiple photos -->

          {% endif %}
        {% else %}
          <!-- Normal post containers -->
          {% if ((post.videos or post.photos) and not ((post.videos and post.photos) or post.videos|length >1 or post.photos|length>1)) and post.post_content %}
            <div class="post-container">
              <div class="post-rectangle-3">
                <div class="post-rectangle-4">
                  <div class="post-upper-left">
                    <img class="post-profile-pic" img src="../../static/img/postprofile.jpg"/></img>
                    <h5 class="post-usertag" style="font-weight: bold;">{{post.author_tag}} </h5>
                  </div>
              
                  <div class="post-middle-part">
                    <div class="post-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}">
                      {% if post.photos %}
                        <img class="post-photo" source src="{{post.photos[0].photo_url}}" >
                      {% else %}
                        <video class="post-video" source src="{{post.videos[0].video_url}}" controls></video>
                      {% endif %}
                    </div>
                    <h4 class="post-description">{{post.post_content}}</h4>
                  </div>
                
                  <div class="post-upper-right">
                    <div class="dropdown">
                      <button class="post-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                        <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                        </svg>
                      </button>
                      <div class="dropdown-content">
                        {% if post.author_tag == current_user.tag %} 
                          <a data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a>
                          <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                        {%else%}
                          <a>Report</a>
                        {%endif%}
                      </div>
                    </div>
                    <div class="post-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</div>
                  </div>
              
                  <div class="post-bottom-part">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                        <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-hearts-filled" onclick='likeMainFeedPostNorm({{post.post_id}})' viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-hearts" onclick='likeMainFeedPostNorm({{post.post_id}})' viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                  {% endif %}
                  <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% endif %}
                      <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                    {% if current_user.tag in post.shares|map(attribute="sharer_tag") %}
                      <button class="post-shares" style="color:#1DA1F2" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% else %}
                      <button class="post-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% endif %}
                    <h6>{{post.shares|length}}</h6>
                  </div>
                </div>
              </div>
          <!-- Normal Post with text only container  -->
          {% elif not post.photos and post.post_content %}
            <div class="post-wto-container">
              <img class="post-wto-profile-pic "img src="../../static/img/postprofile.jpg"/>

              <div class="post-wto-right-side">
                <div class="post-wto-rectangle-3">
                  <div class="post-wto-rectangle-4">
            
                    <div class="post-wto-upper">
                      <div class="post-wto-upper-left">
                        <img class="post-wto-prof-pic "img src="../../static/img/postprofile.jpg"/>
                        <h5 class="post-wto-usertag" style="font-weight: bold">{{post.author_tag}} </h5>
                      </div>
                
                      <div class="post-wto-upper-right">
                        <div class="dropdown">
                          <button class="post-wto-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                            <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                            </svg>
                          </button>
                          <div class="dropdown-content">
                            {% if post.author_tag == current_user.tag %} 
                              <a data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a>
                              <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                            {%else%}
                              <a>Report</a>
                            {%endif%}
                          </div>
                        </div>
                        <h6 class="post-wto-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</h6>
                      </div>
                    </div>

                    <div class="post-wto-middle-part">
                      <h5 class="post-wto-description">{{ post.post_content}}</h5>
                    </div>
        
            
          
                    <div class="post-wto-bottom-part">
                      {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                        {% for like in post.likes %}
                          {% if current_user.tag == like.author_tag %}
                          <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts-filled" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                          </svg>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                      </svg>
                    {% endif %}
                    <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                      {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      {% endif %}
                        <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                      {% if current_user.tag in post.shares|map(attribute="sharer_tag")|list %}
                        <button class="post-wto-shares" style="color:#1DA1F2" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                          <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                          </svg>
                        </button>
                      {% else %}
                        <button class="post-wto-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                          <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                          </svg>
                        </button>
                      {% endif %}
                      <h6>{{post.shares|length}}</h6>
                    </div>
                  </div>
                </div>
              </div>
          
          <!-- END of Normal Post with text only container -->

          <!-- START of Normal Post with mutiple photos -->
          {% elif post.videos or post.photos %}
            <div class="post-wmp-container"> 
              <div class="post-wmp-rectangle-3" id="post-rect-3{{post.post_id}}">
                <div class="post-wmp-rectangle-4" id="post-rect-4{{post.post_id}}">
          
                  <div class="post-upper-left">
                    <img class="post-profile-pic" img src="../../static/img/postprofile.jpg"/></img>
                    <h5 class="post-usertag" style="font-weight: bold;">{{post.author_tag}} </h5>
                  </div>       
        
                  <div class="post-wmp-middle-part" onload="updateButton({{post.post_id}});">   
                    {% if post.post_content %}
                      <div class="post-wmp-desc d-block" id="post-wmp-desc"><span>{{post.post_content}}</span></div>
                      <style>
                        #slider-button{{post.post_id}} {
                          margin-top: 176px;
                        }
        
                        #post-rect-4{{post.post_id}} {
                          height: 490px;
                        }

                        #post-rect-3{{post.post_id}}{
                          height: 405px;
                        }

                        #post-bottom{{post.post_id}}{
                          top: 15px;
                        }

                        #gallery{{post.post_id}}{
                          top: -15px;
                        }

                        #post-wmp-upper-right{{post.post_id}}{
                          top: -380px;
                        }
                        
                      </style>
                    {% endif %} 
        
                    {% if post.photos or post.videos %}
                      <div class="post-wmp-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"> 
                        {% if post.photos %}
                          {% for photo in post.photos %}
                            <img class="wmp-photo" src="{{photo.photo_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></img> 
                          {% endfor %}
                        {% endif %}
              
                        {% if post.videos %}
                          {% for video in post.videos %}
                            <video src="{{video.video_url}}" class="wmp-video" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}" controls></video> 
                          {% endfor %}
                        {% endif %}
                      </div>
                      <button id="slider-button{{post.post_id}}" class="slider-button" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></button> 
                    {% endif %}
                
                    <script src="https://code.jquery.com/jquery-3.6.1.js"
                    integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
                    crossorigin="anonymous"></script>
                    <script type="text/javascript">   
                      $("#gallery{{post.post_id}}").ready(
                        function(){
                        updateButton({{post.post_id}})
                      });  
                    </script> 
                  </div>
                  
                  <div class="post-wmp-upper-right" id="post-wmp-upper-right{{post.post_id}}">
                    <div class="dropdown">
                      <button class="post-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                        <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                        </svg>
                      </button>
                      <div class="dropdown-content">
                        {% if post.author_tag == current_user.tag %} 
                          <a data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a>
                          <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                        {%else%}
                          <a>Report</a>
                        {%endif%}
                      </div>
                    </div>
                    <div class="post-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</div>
                  </div>
              
                  <div class="post-wmp-bottom-part" id="post-bottom{{post.post_id}}">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                        <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts-filled" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                  {% endif %}
                  <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% endif %}
                    <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                    {% if current_user.tag in post.shares|map(attribute="sharer_tag") %}
                      <button class="post-shares" style="color:#1DA1F2" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% else %}
                      <button class="post-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% endif %}
                    <h6>{{post.shares|length}}</h6>
                  </div>
                </div>
              </div>

          <!-- END of Normal Post with multiple photos -->

          {% endif %}
        {% endif %}
      {% else %}
        <!-- post containers -->
        {% if ((post.videos or post.photos) and not ((post.videos and post.photos) or post.videos|length >1 or post.photos|length>1)) and post.post_content %}
        <div class="post-container">
          <div class="post-rectangle-3">
            <div class="post-rectangle-4">
              <div class="post-upper-left">
                <img class="post-profile-pic" img src="../../static/img/postprofile.jpg"/></img>
                <h5 class="post-usertag" style="font-weight: bold;">{{post.author_tag}} </h5>
              </div>
          
              <div class="post-middle-part">
                <div class="post-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}">
                  {% if post.photos %}
                    <img class="post-photo" source src="{{post.photos[0].photo_url}}" >
                  {% else %}
                    <video class="post-video" source src="{{post.videos[0].video_url}}" controls></video>
                  {% endif %}
                </div>
                <h4 class="post-description">{{post.post_content}}</h4>
              </div>
            
              <div class="post-upper-right">
                <div class="dropdown">
                  <button class="post-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                    <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                    </svg>
                  </button>
                  <div class="dropdown-content">
                    {% if post.author_tag == current_user.tag %} 
                      <a data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a>
                      <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                    {%else%}
                      <a>Report</a>
                    {%endif%}
                  </div>
                </div>
                <div class="post-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</div>
              </div>
          
              <div class="post-bottom-part">
                {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                  {% for like in post.likes %}
                    {% if current_user.tag == like.author_tag %}
                    <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-hearts-filled" onclick='likeMainFeedPostNorm({{post.post_id}})' viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                  {% endif %}
                {% endfor %}
              {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-hearts" onclick='likeMainFeedPostNorm({{post.post_id}})' viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                </svg>
              {% endif %}
              <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                    <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                  </svg>
                {% else %}
                  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                    <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                  </svg>
                {% endif %}
                <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                {% if current_user.tag in post.shares|map(attribute="sharer_tag") %}
                  <button class="post-shares" style="color:#1DA1F2" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                    <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                    </svg>
                  </button>
                {% else %}
                  <button class="post-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                    <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                    </svg>
                  </button>
                {% endif %}
                <h6>{{post.shares|length}}</h6>
              </div>
            </div>
          </div>
        <!-- Post with text only container  -->
        {% elif not post.photos and post.post_content %}
          <div class="post-wto-container">
            <img class="post-wto-profile-pic "img src="../../static/img/postprofile.jpg"/>

            <div class="post-wto-right-side">
              <div class="post-wto-rectangle-3">
                <div class="post-wto-rectangle-4">
          
                  <div class="post-wto-upper">
                    <div class="post-wto-upper-left">
                      <img class="post-wto-prof-pic "img src="../../static/img/postprofile.jpg"/>
                      <h5 class="post-wto-usertag" style="font-weight: bold">{{post.author_tag}} </h5>
                    </div>
              
                    <div class="post-wto-upper-right">
                      <div class="dropdown">
                        <button class="post-wto-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                          <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                          </svg>
                        </button>
                        <div class="dropdown-content">
                          {% if post.author_tag == current_user.tag %} 
                            <a data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a>
                            <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                          {%else%}
                            <a>Report</a>
                          {%endif%}
                        </div>
                      </div>
                      <h6 class="post-wto-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</h6>
                    </div>
                  </div>

                  <div class="post-wto-middle-part">
                    <h5 class="post-wto-description">{{ post.post_content}}</h5>
                  </div>
      
          
        
                  <div class="post-wto-bottom-part">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                        <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts-filled" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                  {% endif %}
                  <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% else %}
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                      </svg>
                    {% endif %}
                      <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                    {% if current_user.tag in post.shares|map(attribute="sharer_tag")|list %}
                      <button class="post-wto-shares" style="color:#1DA1F2" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% else %}
                      <button class="post-wto-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                        <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% endif %}
                    <h6>{{post.shares|length}}</h6>
                  </div>
                </div>
              </div>
            </div>
        
        <!-- END of Post with text only container -->

        <!-- START of Post with mutiple photos -->
        {% elif post.videos or post.photos %}
          <div class="post-wmp-container"> 
            <div class="post-wmp-rectangle-3" id="post-rect-3{{post.post_id}}">
              <div class="post-wmp-rectangle-4" id="post-rect-4{{post.post_id}}">
        
                <div class="post-upper-left">
                  <img class="post-profile-pic" img src="../../static/img/postprofile.jpg"/></img>
                  <h5 class="post-usertag" style="font-weight: bold;">{{post.author_tag}} </h5>
                </div>       
      
                <div class="post-wmp-middle-part" onload="updateButton({{post.post_id}});">   
                  {% if post.post_content %}
                    <div class="post-wmp-desc d-block" id="post-wmp-desc"><span>{{post.post_content}}</span></div>
                    <style>
                      #slider-button{{post.post_id}} {
                        margin-top: 176px;
                      }
      
                      #post-rect-4{{post.post_id}} {
                        height: 490px;
                      }

                      #post-rect-3{{post.post_id}}{
                        height: 405px;
                      }

                      #post-bottom{{post.post_id}}{
                        top: 15px;
                      }

                      #gallery{{post.post_id}}{
                        top: -15px;
                      }

                      #post-wmp-upper-right{{post.post_id}}{
                        top: -380px;
                      }
                      
                    </style>
                  {% endif %} 
      
                  {% if post.photos or post.videos %}
                    <div class="post-wmp-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"> 
                      {% if post.photos %}
                        {% for photo in post.photos %}
                          <img class="wmp-photo" src="{{photo.photo_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></img> 
                        {% endfor %}
                      {% endif %}
            
                      {% if post.videos %}
                        {% for video in post.videos %}
                          <video src="{{video.video_url}}" class="wmp-video" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}" controls></video> 
                        {% endfor %}
                      {% endif %}
                    </div>
                    <button id="slider-button{{post.post_id}}" class="slider-button" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></button> 
                  {% endif %}
              
                  <script src="https://code.jquery.com/jquery-3.6.1.js"
                  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
                  crossorigin="anonymous"></script>
                  <script type="text/javascript">   
                    $("#gallery{{post.post_id}}").ready(
                      function(){
                      updateButton({{post.post_id}})
                    });  
                  </script> 
                </div>
                
                <div class="post-wmp-upper-right" id="post-wmp-upper-right{{post.post_id}}">
                  <div class="dropdown">
                    <button class="post-settings"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                      <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                      </svg>
                    </button>
                    <div class="dropdown-content">
                      {% if post.author_tag == current_user.tag %} 
                        <a data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a>
                        <a data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a>
                      {%else%}
                        <a>Report</a>
                      {%endif%}
                    </div>
                  </div>
                  <div class="post-date">{{ post.date_posted.strftime("%d, %b %Y").lower()}}</div>
                </div>
            
                <div class="post-wmp-bottom-part" id="post-bottom{{post.post_id}}">
                  {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                    {% for like in post.likes %}
                      {% if current_user.tag == like.author_tag %}
                      <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts-filled" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                      </svg>
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <svg xmlns="http://www.w3.org/2000/svg" id="like-button-{{post.post_id}}" width="30" height="30" fill="currentColor" class="post-wto-hearts" onclick='likeMainFeedPost({{post.post_id}})' viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                  </svg>
                {% endif %}
                <h6 id="likes-count-{{post.post_id}}">{{post.likes|length}}</h6>
                  {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                      <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                    </svg>
                  {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" id="mainfeed-comment-button-{{post.post_id}}" viewBox="0 0 16 16">
                      <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                    </svg>
                  {% endif %}
                  <h6 id="mainfeed-comments-length-{{post.post_id}}">{{post.comments|length}}</h6>
                  {% if current_user.tag in post.shares|map(attribute="sharer_tag") %}
                    <button class="post-shares" style="color:#1DA1F2" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                      <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                      </svg>
                    </button>
                  {% else %}
                    <button class="post-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="27" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                      <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                      </svg>
                    </button>
                  {% endif %}
                  <h6>{{post.shares|length}}</h6>
                </div>
              </div>
            </div>

          <!-- END of Post with multiple photos -->

        {% endif %}
      {% endif %}
    {% endfor %}
            </div>
          </div>
        </div> 
      </div> 
    </div> 
  </div>
</div>
{% endblock %}



