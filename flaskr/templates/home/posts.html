{% extends 'base.html' %}
{% block title %} FurPaws - Home {% endblock %}
{% block body_content %}
<div class="main-feed">
  <div classs="main-feed-posts">
    <br>
    {% for post in respective_post %}
      <!-- REGULAR POST WITH ONE PHOTO/VIDEO AND WITH DESCRIPTION -->
      {% if ((post.videos or post.photos) and not ((post.videos and post.photos) or post.videos|length >1 or post.photos|length>1)) and post.post_content %}
        <div class="shadow-sm rounded" style="background-color: #1DA1F2; width:1150px;"><br>
          <div class="card" style="border: none;">
            <div class="card-header" style="background-color:white;">
              <div class="row">
                <div class="col text-start">
                  {{post.author_tag}}
                </div>
                <div class="col text-end">
                  {{ post.date_posted.strftime("%d,%b %Y").lower()}}
                  {% if post.author_tag == current_user.tag %}
                    <div class="btn-group">
                      <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                          <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                        </svg>
                      </button>
                      <ul class="dropdown-menu">
                        <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a></li>
                        <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a></li>
                      </ul>
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col">
                  {% if post.photos %}
                    <img class="post-photo" width="500px;" height="500px;" source src="{{post.photos[0].photo_url}}" >
                  {% else %}
                    <video class="post-video" width="500px;" height="500px;" source src="{{post.videos[0].video_url}}" controls></video>
                  {% endif %}
                </div>
                <div class="col text-start" style="height:200px;">
                  <hr>
                  {{post.post_content}}
                </div>
              </div>
            </div>
            <div class="card-footer text-end" style="background-color: white; border: none;">
              <div class="row">
                <div class="col-6">
                </div>
                <div class="col-6">
                  <div class="row">
                    <div class="col-1">
                      {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                        {% for like in post.likes %}
                          {% if current_user.tag == like.author_tag %}
                            <a class="post-wto-hearts-unfilled" href="home/unlike-post/{{like.id}}" style="border:none; outline:none; background-color:white">
                              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                              </svg>
                            </a>
                          {% endif %}
                        {% endfor %}
                      {% else %}
                        <a class="post-wto-hearts" href="home/like-post/{{post.post_id}}" style="border:none; outline:none; background-color:white">
                          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                          </svg>
                        </a>
                      {% endif %}
                    </div>
                    <div class="col-1">
                      <h6>{{post.likes|length}}</h6>
                    </div>
                    <div class="col-1">
                      {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                        <button class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                            <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                          </svg>
                        </button>
                      {% else %}
                        <button class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                            <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                          </svg>
                        </button>
                      {% endif %}
                    </div>
                    <div class="col-1">
                      <h6>{{post.comments|length}}</h6>
                    </div>
                    <div class="col-1">
                      {% if current_user.tag in post.sharedposts|map(attribute="sharer_tag")|list %}
                        <button class="post-wto-shares-filled" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                            <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                          </svg>
                        </button>
                      {% else %}
                        <button class="post-wto-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                            <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                          </svg>
                        </button>
                      {% endif %}
                    </div>
                    <div class="col-1">
                      <h6>{{post.sharedposts|length}}</h6>
                      <br>
                    </div>
                  </div> 
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END OF REGULAR POST WITH ONE PHOTO/VIDEO AND WITH DESCRIPTION -->
        <!-- REGULAR POST WITH MULTIPLE PHOTOS OR VIDEOS AND WITH DESCRIPTION -->
        {% elif post.videos|length > 1 or post.photos|length > 1 and post.post_content %}
          <div class="shadow-sm rounded" style="background-color: #1DA1F2; width:1150px;"><br>
            <div class="card" style="border: none;">
              <div class="card-header" style="background-color:white;">
                <div class="row">
                  <div class="col text-start">
                    {{post.author_tag}}
                  </div>
                  <div class="col text-end">
                    {{ post.date_posted.strftime("%d,%b %Y").lower()}}
                    {% if post.author_tag == current_user.tag %}
                      <div class="btn-group">
                        <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                            <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                            </svg>
                        </button>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a></li>
                          <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a></li>
                        </ul>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="row text-start" style="margin-left:10px;">
                  <hr>
                  {{post.post_content}}
                </div>
                <br>
                <div class="post-wmp-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}">
                  {% if post.photos %}
                    {% for photo in post.photos %}
                        <img src="{{photo.photo_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"/>
                    {% endfor %}
                  {% endif %}
                  {% if post.videos %}
                    {% for video in post.videos %}
                      <video src="{{video.video_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}" controls></video>
                    {% endfor %}
                  {% endif %}
                  <button id="slider-button{{post.post_id}}" class="slider-button" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></button>
                </div>
                <script src="https://code.jquery.com/jquery-3.6.1.js"
                integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
                crossorigin="anonymous"></script>
                <script type="text/javascript">   
                  $("#gallery{{post.post_id}}").ready(
                    function(){
                    updateButton({{post.post_id}})
                  });  
                </script>
              </div>
              <style>
                #slider-button{{post.post_id}} {
                  margin-top: 54px;
                }
        
                #post-rect-4{{post.post_id}} {
                  height: 490px
                }
                
                
              </style>
              <div class="card-footer text-start" style="background-color: white; border: none;">
                <div class="row">
                  <div class="col-1">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                          <a class="post-wto-hearts-unfilled" href="home/unlike-post/{{like.id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                              <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                            </svg>
                          </a>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <a class="post-wto-hearts" href="home/like-post/{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                      </a>
                    {% endif %}
                  </div>
                  <div class="col-1">
                    <h6>{{post.likes|length}}</h6>
                  </div>
                  <div class="col-1">
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <button class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      </button>
                    {% else %}
                      <button class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      </button>
                    {% endif %}
                  </div>
                  <div class="col-1">
                    <h6>{{post.comments|length}}</h6>
                  </div>
                  <div class="col-1">
                    {% if current_user.tag in post.sharedposts|map(attribute="sharer_tag")|list %}
                      <button class="post-wto-shares-filled" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                          <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                    </button>
                    {% else %}
                      <button class="post-wto-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                          <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% endif %}
                  </div>
                  <div class="col-1">
                    <h6>{{post.sharedposts|length}}</h6>
                    <br>
                  </div>
                </div> 
              </div>
            </div>
          </div>
        <!-- END OF REGULAR POST WITH MULTIPLE PHOTOS OR VIDEOS AND WITH DESCRIPTION -->
        <!-- REGULAR POST WITH MULTIPLE PHOTOS OR VIDEOS BUT WITH NO DESCRIPTION -->
        {% elif (post.videos or post.photos) and not post.post_content %}
          <div class="shadow-sm rounded" style="background-color: #1DA1F2; width: 1150px;"><br>
            <div class="card" style="border: none;">
              <div class="card-header" style="background-color:white;">
                <div class="row">
                  <div class="col text-start">
                    {{post.author_tag}}
                  </div>
                  <div class="col text-end">
                    {{ post.date_posted.strftime("%d,%b %Y").lower()}}
                    {% if post.author_tag == current_user.tag %}
                      <div class="btn-group">
                        <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                            <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                          </svg>
                        </button>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a></li>
                          <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a></li>
                        </ul>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="post-wmp-uploaded-content" id="gallery{{post.post_id}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}">
                  {% if post.photos %}
                    {% for photo in post.photos %}
                        <img src="{{photo.photo_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"/>
                    {% endfor %}
                  {% endif %}
                  {% if post.videos %}
                    {% for video in post.videos %}
                      <video src="{{video.video_url}}" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}" controls></video>
                    {% endfor %}
                  {% endif %}
                  <button id="slider-button{{post.post_id}}" class="slider-button" data-bs-toggle="modal" data-bs-target="#uploaded-content-modal{{post.post_id}}"></button>
                </div>
                <script src="https://code.jquery.com/jquery-3.6.1.js"
                integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
                crossorigin="anonymous"></script>
                <script type="text/javascript">   
                  $("#gallery{{post.post_id}}").ready(
                    function(){
                    updateButton({{post.post_id}})
                  });  
                </script>
              </div>
              <style>
                #slider-button{{post.post_id}} {
                  margin-top: 54px;
                }
        
                #post-rect-4{{post.post_id}} {
                  height: 490px
                }
              
            
              </style>
              <div class="card-footer text-start" style="background-color: white; border: none;">
                <div class="row">
                  <div class="col-1">
                    {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                      {% for like in post.likes %}
                        {% if current_user.tag == like.author_tag %}
                          <a class="post-wto-hearts-unfilled" href="home/unlike-post/{{like.id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                              <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                            </svg>
                          </a>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <a class="post-wto-hearts" href="home/like-post/{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                          <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                      </a>
                    {% endif %}
                  </div>
                  <div class="col-1">
                    <h6>{{post.likes|length}}</h6>
                  </div>
                  <div class="col-1">
                    {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                      <button class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      </button>
                    {% else %}
                      <button class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                          <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                        </svg>
                      </button>
                    {% endif %}
                  </div>
                  <div class="col-1">
                    <h6>{{post.comments|length}}</h6>
                  </div>
                  <div class="col-1">
                    {% if current_user.tag in post.sharedposts|map(attribute="sharer_tag")|list %}
                      <button class="post-wto-shares-filled" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                          <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% else %}
                      <button class="post-wto-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                          <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                        </svg>
                      </button>
                    {% endif %}
                  </div>
                  <div class="col-1">
                    <h6>{{post.sharedposts|length}}</h6>
                    <br>
                  </div>
                </div> 
              </div>
            </div>
          </div>
        <!-- END OF REGULAR POST WITH MULTIPLE PHOTOS OR VIDEOS BUT WITH NO DESCRIPTION -->
        <!-- REGULAR POST WITH TEXT ONLY -->
        {% elif not post.photos and post.post_content %}
          <div class="row">
            <div class="col-4 text-center">
              <img class="post-wto-profile-pic " img src="../../static/img/postprofile.jpg"/>
            </div>
            <div class="col">
              <div class="shadow-sm rounded" style="background-color: #1DA1F2; width:1150px;"><br>
                <div class="card" style="border:none;">
                  <div class="card-header" style="background-color:white">
                    <div class="row">
                      <div class="col text-start">
                        {{post.author_tag}}
                      </div>
                      <div class="col text-end">
                        {{ post.date_posted.strftime("%d,%b %Y").lower()}}
                        {% if post.author_tag == current_user.tag %}
                          <div class="btn-group">
                            <button type="button" style="outline:none; border:none; background-color:white;"data-bs-toggle="dropdown" aria-expanded="false">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots" viewBox="0 0 16 16">
                                <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                </svg>
                            </button>
                            <ul class="dropdown-menu">
                              <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editPostModal{{post.post_id}}">Edit</a></li>
                              <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deletePostModal{{post.post_id}}">Delete</a></li>
                            </ul>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <div class="col text-start" style="height:200px">
                        <hr>
                        {{post.post_content}}
                      </div>
                    </div>
                  </div>
                  <div class="card-footer text-center" style="background-color: white; border: none;"> 
                    <div class="row">
                      <div class="col-1">
                        {% if current_user.tag in post.likes|map(attribute="author_tag")|list %}
                          {% for like in post.likes %}
                            {% if current_user.tag == like.author_tag %}
                              <a class="post-wto-hearts-unfilled" href="home/unlike-post/{{like.id}}" style="border:none; outline:none; background-color:white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                  <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                                </svg>
                              </a>
                            {% endif %}
                          {% endfor %}
                        {% else %}
                          <a class="post-wto-hearts" href="home/like-post/{{post.post_id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                              <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                            </svg>
                          </a>
                        {% endif %}
                      </div>
                      <div class="col-1">
                        <h6>{{post.likes|length}}</h6>
                      </div>
                      <div class="col-1">
                        {% if current_user.tag in post.comments|map(attribute="author_tag")|list %}
                          <button class="post-wto-comments-filled" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                              <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                            </svg>
                          </button>
                        {% else %}
                          <button class="post-wto-comments" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                              <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                            </svg>
                          </button>
                        {% endif %}
                      </div>
                      <div class="col-1">
                        <h6>{{post.comments|length}}</h6>
                      </div>
                      <div class="col-1">
                        {% if current_user.tag in post.sharedposts|map(attribute="sharer_tag")|list %}
                          <button class="post-wto-shares-filled" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                              <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                            </svg>
                          </button>
                        {% else %}
                          <button class="post-wto-shares" data-bs-toggle="modal" data-bs-target="#sharePostModal{{post.post_id}}" style="border:none; outline:none; background-color:white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" border-color="blue" class="bi bi-share-fill" viewBox="0 0 16 16">
                              <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                            </svg>
                          </button>
                        {% endif %}
                      </div>
                      <div class="col-1">
                        <h6>{{post.sharedposts|length}}</h6>
                        <br>
                      </div>
                    </div> 
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- END OF REGULAR POST WITH TEXT ONLY -->
      {% endif %}
 
      <!-- DELETE POST MODAL  -->
      <div class="modal fade" id="deletePostModal{{post.post_id}}" tabindex="-1" aria-labelledby="deletePostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="deleteModalLabel">
                Delete Post
              </h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to delete this post?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                Close
              </button>
              <form action="{{url_for('home.delete_post', post_id=post.post_id)}}" method="POST">
                {{form.csrf_token}}
                <input type="submit" class="btn btn-danger" value="Delete">
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- EDIT POST MODAL -->
      <div class="modal fade" id="editPostModal{{post.post_id}}" tabindex="-1" aria-labelledby="editPostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="editPostModalLabel">
                Edit Post
              </h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              </button>
            </div>
            <div class="modal-body">
              <form action="/posts/update/{{post.post_id}}" method="POST">
                <textarea class="form-control" name="post_description" id="post_description" placeholder="{{post.post_content}}">{{post.post_content}}</textarea>
            </div>
            <h5 align="left">
              Image Preview:
            </h5>
            <div class="card">
              <div class="card-body d-flex flex-wrap justify-content-start">
                {% for photo in post.photos %}
                    <div class="image-preview d-flex justify-content-center position-relative">
                      <img src="{{photo.photo_url}}" alt="Image">
                      <span class="position-absolute">&times;</span>
                    </div>
                {% endfor %}
              </div>
            </div>
            <div class="modal-footer">
              <label for="add_photos" class="add-post-btns" name="add_photos"><img src="../../static/img/image-line.png"/>
                Add Photos
              </label>
    
              <label for="add_videos" name="add_videos" class="add-post-btns">
                <img src="../../static/img/movie-line.png">
                Add Videos
              </label>
              <input type="file" name="files[]" multiple="true" id="add_photos" accept="image/png, image/jpg, image/jpeg" onclick="imageTooLargeAlert();" hidden>
          <input type="file" name="add_videos" multiple="true" id="add_videos" accept="video/mp4" onclick="videoTooLargeAlert();"hidden> Â 
              {{edit_form.csrf_token}}
              {{edit_form.edit_post_button(class="submit-post")}}</form>
            </div>
          </div>
        </div>
      </div>

      <!-- SHARE POST MODAL -->
      <div class="modal fade" id="sharePostModal{{post.post_id}}" tabindex="-1" aria-labelledby="sharePostModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="shareModalLabel">
                Share Post
              </h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to share this post?
            </div>
            <div class="modal-footer">
              <form action="{{url_for('home.share_post', post_id=post.post_id)}}" method="POST">
                {{form.csrf_token}}
                <input type="submit" class="submit-post" value="Share Post">
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- COMMENT MODALS  -->
      <div class="modal fade" id="viewCommentsModal{{post.post_id}}" tabindex="-1" role="dialog" aria-labelledby="viewCommentsModalLabel{{post.post_id}}" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <p class="modal-title fs-5" id="viewCommentsModalLabel{{post.post_id}}">
                @{{post.author_tag}}'s post
              </p>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              </button>
            </div>
            <div class="card mt-3 mb-3 p-3">
              "{{post.post_content}}"
            </div>
            <div class="modal-body bg-info bg-opacity-10" >
              <div class="collapse" id="comments-{{post.post_id}}">
                <div class="card">
                  <div class="card-body">
                    {% if post.author_tag == current_user.tag %}
                      {% for comments in post.comments %}
                        {% if comments.author_tag == current_user.tag %}
                          <div class="card text-start">
                            <div class="card-body">
                              <a href="#">{{comments.author_tag}}</a>
                              {{comments.comment_content}}
                              <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#editCommentModal{{comments.comment_id}}">
                                Edit
                              </button>
                              <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteCommentModal{{comments.comment_id}}">
                                Delete  
                              </button>
                            </div>
                          </div>
                          <br>
                        {% else %}
                          <div class="card">
                            <div class="card-body">
                              <a href="#">{{comments.author_tag}}</a>
                              {{comments.comment_content}}
                              <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteCommentModal{{comments.comment_id}}">
                                Delete
                              </button>
                            </div>
                          </div>
                          <br>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      {% for comments in post.comments %}
                          {% if comments.author_tag == current_user.tag %}
                            <div class="card">
                              <div class="card-body">
                                <a href="#">{{comments.author_tag}}</a>
                                {{comments.comment_content}}
                                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#editCommentModal{{comments.comment_id}}">
                                  Edit
                                </button>
                                <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteCommentModal{{comments.comment_id}}">
                                  Delete  
                                </button>
                              </div>
                            </div>
                            <br>
                          {% else %}
                            <div class="card">
                              <div class="card-body">
                                <a href="#">{{comments.author_tag}}</a>
                                {{comments.comment_content}}
                              </div>
                            </div>
                            <br>
                          {% endif%}
                      {% endfor %}
                    {% endif %}
                  </div>
                </div>
              </div>
              <p class="card-text">
                {% if post.comments|length > 0 %}
                  <a data data-bs-toggle="collapse" href="#comments-{{post.post_id}}" role="button">
                    <small>
                      View {{post.comments|length}} Comments
                    </small>
                  </a>
                {% else %}
                  <small class="text-muted">No comments!</small>
                {% endif %}
              </p>
            </div>
            <div class="modal-footer">
              <form class="input-group mb-3" method="POST" action="/posts/create-comment/{{post.post_id}}">
              <textarea class="form-control" style="width: 115px;" id="comment_textbox" name="comment_textbox" placeholder="Say something about this post..."></textarea>
              {{form.csrf_token}}
              <br><pre> </pre>
              <button type="submit" 
              style=
              "border-radius: 10px;
              width:170px;
              padding: 3px;
              border:none;
              outline:none;
              background-color: rgb(109, 216, 235);
              color: white;">
                Comment
              </button>
              </form>
            </div>
            <br>

          </div>
        </div>
      </div>
      {% for comments in post.comments %}
      <div class="modal fade" id="editCommentModal{{comments.comment_id}}" tabindex="-1" role="dialog" aria-labelledby="editCommentModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="editCommentModalLabel">
                Edit Comment
              </h1>
              <button type="button" class="btn-close" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}"></button>
            </div>
            <div class="modal-body">
              <form action="/posts/update-comment/{{comments.comment_id}}/{{comments.post_commented}}" method="POST">
                <textarea class="form-control" name="edit_comment_textbox" id="edit_comment_textbox" placeholder="{{comments.comment_content}}" required>{{comments.comment_content}}</textarea>
            </div>
            <div class="modal-footer">
              {{edit_comment_form.csrf_token}}
              {{edit_comment_form.edit_comment_button(class="submit-post")}}</form>
              <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}" style="width:100%">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="deleteCommentModal{{comments.comment_id}}" tabindex="-1" role="dialog" aria-labelledby="deleteCommentModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="deleteCommentModalLabel">
                Delete Comment
              </h1>
              <button type="button" class="btn-close" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}"></button>
            </div>
            <div class="modal-body">
              Are you sure you want to delete this comment?
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#viewCommentsModal{{post.post_id}}">
                Cancel
              </button>
              <form action="{{url_for('home.delete_comment_on_visited_post', comment_id=comments.comment_id, post_id=comments.post_commented)}}" method="POST">
                {{form.csrf_token}}
                <input type="submit" class="btn btn-danger" value="Delete">
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    {% endfor %}
  </div>
</div>
{% endblock %}