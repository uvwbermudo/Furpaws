<div id="job_home_cont" class="">
    <div id="job_home_controls" >
        <button type="button" style="z-index: 20;" class="button-17 add-job-btn border-0" data-bs-toggle="modal" data-bs-target="#create-job-form" >&plus; Post Job</button>
    </div>
    <div id="job_home_feed" class="">
		<!-- FREELANCER LAYOUT -->
		{% if current_user.account_type=='freelancer' %}
		<div class="d-flex flex-row w-100 align-items-center" style="column-gap: 5px;">
            <span class="d-inline-block text-muted" style="font-size: 12px;">Your Job Applications</span>
            <hr class="d-inline-block d-inline" style="flex:1; margin-right:25px">
        </div>

		<div id="FL-applications-cont">
			{% if applied_to|length == 0 %}
            <h5 style="margin-top: 10px; margin-left:25px;" class="text-muted d-block">You currently have no job applications.</h5>
            {% else %}
			{% for application in applied_to %}
			{% set job = application.job_details %}
			<div class="FL-job-apply" style="margin-top: 10px;" >
                    <div>
                        <img src="../../static/img/test_profilepic.png" alt=""  style="border-radius: 50%; overflow:hidden;">
                    </div>
                    <div>
                        <span  class="text-muted fs-10">Pet Owner</span>
                        <span class="fs-12 fw-bolder" style="max-width: 120px; white-space:wrap;">
							{{job.poster_details.first_name.split(' ')[0]}} {{job.poster_details.last_name}}
						</span>
                    </div>
                    <div class> 
                        <span class="text-muted fs-10">Job type</span>
                        <span class="fs-12 fw-semibold">{{job.job_type}}</span>
                    </div>      
                    <div>
                        <span  class="text-muted fs-10">Job Schedule</span>
                        <span class="fs-12 fw-semibold" style="max-width: 80px; white-space:wrap;">{{job.job_schedule}}</span>
                    </div>
                    <div>
                        <span class="text-muted fs-10">Application Status</span>
                        <span class="fs-10 badge text-bg-secondary fw-normal rounded-5" style="max-width: 60px; text-align:center;">{{application.application_status}}</span>
                    </div>
                     <div>
                        <button type="button" class="btn btn-primary fs-12 rounded-5" data-bs-toggle="modal" data-bs-target="#" style="max-width: 120px;">
                        Job Details
                      </button>
                    </div> 

                </div>
			{% endfor %}
			{%endif%}
		</div>
		<div class="d-flex flex-row w-100 align-items-center" style="column-gap: 5px;">
            <span class="d-inline-block text-muted" style="font-size: 12px;">Ongoing Jobs</span>
            <hr class="d-inline-block d-inline" style="flex:1; margin-right:25px">
        </div>
		<div id="FL-ongoing">
			{% if working_on|length ==  0%}
            <h5 style="margin-top: 10px; margin-left:25px;" class="text-muted d-block">You currently have no ongoing jobs.</h5>

			{% else %}
			{% for job in working_on %}
			<div class="PE-jobs-posted" style="margin-top: 10px;" >
				<div>
					<img src="../../static/img/test_profilepic.png" alt=""  style="border-radius: 50%; overflow:hidden;">
				</div>
				<div>
					<span  class="text-muted fs-10">Freelancer</span>
					<span class="fs-12 fw-bolder" style="max-width: 120px; white-space:wrap;">
						{% set poster = job.job_details.poster_details%}
						<span>{{poster.first_name.split(' ')[0]}} {{poster.last_name}}</span>

					</span>
				</div>
				<div class> 
					<span class="text-muted fs-10">Job type</span>
					<span class="fs-12 fw-semibold">{{job.job_details.job_type}}</span>
				</div>      
				<div>
					<span  class="text-muted fs-10">Job Schedule</span>
					<span class="fs-12 fw-semibold" style="max-width: 80px; white-space:wrap;">{{job.job_details.job_schedule}}</span>
				</div>
				<div>
					<span  class="text-muted fs-10">Job Rate</span>
					<span class="fs-12 fw-semibold">&dollar;{{job.job_details.job_rate}}</span>
				</div>
				<div>
					<span class="text-muted fs-10">Status</span>
					<span class="fs-10 badge text-bg-warning fw-normal rounded-5" style="max-width: 60px ;">{{job.job_details.job_status}}</span>
				</div>
				<div>
					<button type="button" class="btn btn-primary fs-12 rounded-5" data-bs-toggle="modal" data-bs-target="#job-{{job.job_details.job_id}}" style="max-width: 120px;">
					Job Details
				  </button>
				</div>

			</div>
			{% endfor %}
			{% endif %}
		</div>


		{% else %}


		<!-- START OF PET OWNER LAYOUT -->
        <div class="d-flex flex-row w-100 align-items-center" style="column-gap: 5px;">
            <span class="d-inline-block text-muted" style="font-size: 12px;">Your Job Postings</span>
            <hr class="d-inline-block d-inline" style="flex:1; margin-right:25px">
        </div>

        <div id="PE-job-posted-cont">
            {% if jobs_posted|length == 0 %}
            <h5 style="margin-top: 10px; margin-left:25px;" class="text-muted d-block">You currently have no job postings.</h5>
            {% else %}
						{% set applicants = [] %}
            {% for job in jobs_posted %}
                <div class="PE-jobs-posted" style="margin-top: 10px;" >
                    <div>
                        <img src="../../static/img/test_profilepic.png" alt=""  style="border-radius: 50%; overflow:hidden;">
                    </div>
                    <div>
                        <span  class="text-muted fs-10">Freelancer</span>
                        <span class="fs-12 fw-bolder" style="max-width: 120px; white-space:wrap;">
													{% if job.job_details.worker_details %}
													{% set worker = job.job_details.worker_details%}
														<span>{{worker.first_name.split(' ')[0]}} {{worker.last_name}}</span>
													{% else %}
													 <span>N/A</span>
													{% endif %}
												</span>
                    </div>
                    <div class> 
                        <span class="text-muted fs-10">Job type</span>
                        <span class="fs-12 fw-semibold">{{job.job_details.job_type}}</span>
                    </div>      
                    <div>
                        <span  class="text-muted fs-10">Job Schedule</span>
                        <span class="fs-12 fw-semibold" style="max-width: 80px; white-space:wrap;">{{job.job_details.job_schedule}}</span>
                    </div>
                    <div>
                        <span  class="text-muted fs-10">Job Rate</span>
                        <span class="fs-12 fw-semibold">&dollar;{{job.job_details.job_rate}}</span>
                    </div>
                    <div>
                        {% if job.job_status == 'Ongoing' %}
                        {% set badge_class = "text-bg-warning" %}
												{% elif job.job_status =='Waiting' %}
                        {% set badge_class = "text-bg-secondary" %}
												{% endif %}
                        <span class="text-muted fs-10">Status</span>
                        <span class="fs-10 badge {{badge_class}} fw-normal rounded-5" style="max-width: 60px ;">{{job.job_details.job_status}}</span>
                    </div>
                    <div>
                        <button type="button" class="btn btn-primary fs-12 rounded-5" data-bs-toggle="modal" data-bs-target="#job-{{job.job_details.job_id}}" style="max-width: 120px;">
                        Job Details
                      </button>
                    </div>

                </div>
            
						
			{% set applicants = applicants.extend(job.job_details.applicants) %}
            {%endfor%}
            {% endif %}
        </div>
			<div class="d-flex flex-row w-100 align-items-center" style="column-gap: 5px;">
			<span class="d-inline-block text-muted" style="font-size: 12px;">Ongoing Jobs</span>
			<hr class="d-inline-block d-inline" style="flex:1; margin-right:25px">
			</div>

			<!-- ONGOING JOBS -->
			<div id="PE-ongoing-cont">
			{% if ongoing_jobs|length == 0 %}
            <h5 style="margin-top: 10px; margin-left:25px;" class="text-muted d-block">You currently have no ongoing jobs.</h5>
            {% else %}
            {% for job in ongoing_jobs %}
                <div class="PE-jobs-posted" style="margin-top: 10px;" >
                    <div>
                        <img src="../../static/img/test_profilepic.png" alt=""  style="border-radius: 50%; overflow:hidden;">
                    </div>
                    <div>
                        <span  class="text-muted fs-10">Freelancer</span>
                        <span class="fs-12 fw-bolder" style="max-width: 120px; white-space:wrap;">
													{% if job.job_details.worker_details %}
													{% set worker = job.job_details.worker_details%}
														<span>{{worker.first_name.split(' ')[0]}} {{worker.last_name}}</span>
													{% else %}
													 <span>N/A</span>
													{% endif %}
												</span>
                    </div>
                    <div class> 
                        <span class="text-muted fs-10">Job type</span>
                        <span class="fs-12 fw-semibold">{{job.job_details.job_type}}</span>
                    </div>      
                    <div>
                        <span  class="text-muted fs-10">Job Schedule</span>
                        <span class="fs-12 fw-semibold" style="max-width: 80px; white-space:wrap;">{{job.job_details.job_schedule}}</span>
                    </div>
                    <div>
                        <span  class="text-muted fs-10">Job Rate</span>
                        <span class="fs-12 fw-semibold">&dollar;{{job.job_details.job_rate}}</span>
                    </div>
                    <div>
                        {% if job.job_status == 'Ongoing' %}
                        {% set badge_class = "text-bg-warning" %}
												{% elif job.job_status =='Waiting' %}
                        {% set badge_class = "text-bg-secondary" %}
												{% endif %}
                        <span class="text-muted fs-10">Status</span>
                        <span class="fs-10 badge {{badge_class}} fw-normal rounded-5" style="max-width: 60px ;">{{job.job_details.job_status}}</span>
                    </div>
                    <div>
                        <button type="button" class="btn btn-primary fs-12 rounded-5" data-bs-toggle="modal" data-bs-target="#job-{{job.job_details.job_id}}" style="max-width: 120px;">
                        Job Details
                      </button>
                    </div>

                </div>
            
						
            {%endfor%}
            {% endif %}
			</div>
			
			<!-- JOB APPLICANTS -->
			<div class="d-flex flex-row w-100 align-items-center" style="column-gap: 5px;">
					<span class="d-inline-block text-muted" style="font-size: 12px;">Applicants</span>
					<hr class="d-inline-block d-inline" style="flex:1; margin-right:25px">
			</div>
			<div id="PE-applicants-cont">
				{% if applicants|length == 0 %}
				<h5 style="margin-top: 10px; margin-left:25px;" class="text-muted d-block">No applicants.</h5>
				{% else %}
				{% for job in jobs_posted %}
					{% for applicant in job.job_details.applicants %}
						<div class="PE-applicant">

							<div>
								<img src="../../static/img/test_profilepic.png" alt="">
							</div>
							<div>
								{% set first_name = applicant.first_name.split(' ')[0] %}
								<span class="fs-10 text-muted">Freelancer</span>
								<span class="fs-12 fw-semibold">{{first_name}} {{applicant.last_name}} </span>
							</div>
							<div>
								<span class="fs-10 text-muted">Job Applied</span>
								<span class="fs-12 fw-semibold">{{job.job_details.job_type}}</span>
							</div>
							<div>
								<span class="fs-10 text-muted">Scheduled On</span>
								<span class="fs-12 fw-semibold" style="max-width: 80px; white-space:wrap;">{{job.job_details.job_schedule}}</span>
							</div>
							<div>
								<a href="/profiles/{{applicant.tag}}" type="button" class="btn btn-primary rounded-5 fs-12">
									View Profile 
								</a>
								<button type="button" class="btn btn-outline-primary rounded-5 fs-12" data-bs-toggle="modal" data-bs-target="#hire-applicant-{{applicant.tag}}">
									Hire 
								</button>
							</div>

						</div>
						
					{% endfor %}
				{% endfor %}
				{% endif %}
			</div>
		
			{% endif %}

    </div>
</div> 


